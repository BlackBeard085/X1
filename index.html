<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solana Epoch Dashboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            color: #333;
            padding: 20px;
        }
        h1 {
            color: #2c3e50;
        }
        .card {
            background: white;
            padding: 20px;
            margin: 10px 0;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>

    <h1>Solana Epoch Dashboard</h1>
    <div class="card">
        <h2>Current Epoch: <span id="current-epoch">Loading...</span></h2>
        <h3>Total Staked: <span id="total-staked">Loading...</span></h3>
        <h3>Active Stake: <span id="active-stake">Loading...</span></h3>
        <h3>Delinquent Stake: <span id="delinquent-stake">Loading...</span></h3>
        <h3>Validator Name: <span id="validator-name">Your Validator Name</span></h3>
        <h3>Next Leader: <span id="next-leader">Loading...</span></h3>
    </div>

    <script>
        const rpcUrl = "https://api.testnet.solana.com"; // Use the correct RPC endpoint
        
        async function fetchEpochData() {
            try {
                // Fetch the current epoch info
                const epochResponse = await fetch(rpcUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        jsonrpc: "2.0",
                        id: 1,
                        method: "getEpochInfo"
                    })
                });
                const epochData = await epochResponse.json();
                document.getElementById('current-epoch').innerText = epochData.result.epoch;

                // Fetch stake information for a validator
                const yourValidatorIdentity = "HNezNfYC8YyzZBADNaJ7ZuLseqFWmMsFqriGuccZ9kCT"; // Your validator identity
                const stakeResponse = await fetch(rpcUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        jsonrpc: "2.0",
                        id: 1,
                        method: "getStakeActivation",
                        params: [yourValidatorIdentity]
                    })
                });
                const stakeData = await stakeResponse.json();
                document.getElementById('total-staked').innerText = stakeData.result.active.toString();
                // Assuming we're equating active stake to total staked
                document.getElementById('active-stake').innerText = stakeData.result.active.toString();
                document.getElementById('delinquent-stake').innerText = stakeData.result.delinquent.toString();

                // Replace with your validator's name as required
                document.getElementById('validator-name').innerText = "Your Validator Name Here";

                // Fetch next leader information
                const leaderResponse = await fetch(rpcUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        jsonrpc: "2.0",
                        id: 1,
                        method: "getLeaderSchedule"
                    })
                });
                const leaderData = await leaderResponse.json();
                
                // Logic to find next leader's slot can vary. Here, you can use placeholder logic
                // For simplicity, let's put a placeholder variable
                document.getElementById('next-leader').innerText = "Not Implemented"; // Update this as needed

            } catch (error) {
                console.error('Error fetching data:', error);
                // Update UI to reflect that data could not be fetched
                document.getElementById('current-epoch').innerText = "Error";
            }
        }

        // Fetch the data initially
        fetchEpochData();
        // Optionally, refresh the data every 60 seconds
        setInterval(fetchEpochData, 60000);
    </script>

</body>
</html>
